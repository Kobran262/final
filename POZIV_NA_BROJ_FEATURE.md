# üìã –ü–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ **–ø–æ–∑–∏–≤–∞ –Ω–∞ –±—Ä–æ—ò** (payment reference number) –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–≤–æ–π—Å–æ–≤. –≠—Ç–æ –ø–æ–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–µ—Ä–±—Å–∫–∏—Ö –∏–Ω–≤–æ–π—Å–∞—Ö –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø–æ—Ä—É—á–µ–Ω–∏—è.

## ‚ú® –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–≤–æ–π—Å–∞:**
   - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–æ –ø–æ—Å–ª–µ –ø–æ–ª—è "–ù–î–° (%)"
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: `97-12345678`
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: 20 —Å–∏–º–≤–æ–ª–æ–≤
   - –ü–æ–ª–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

2. **–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - –ï—Å–ª–∏ –ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è `ATSNS + –Ω–æ–º–µ—Ä –∏–Ω–≤–æ–π—Å–∞`

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –¥–∞–Ω–Ω—ã–µ –∏–Ω–≤–æ–π—Å–∞
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ HTML —à–∞–±–ª–æ–Ω–µ –∏–Ω–≤–æ–π—Å–∞
   - ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–Ω–≤–æ–π—Å–∞
   - ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ç–ø—Ä–µ–º–Ω–∏—Ü—ã –∏–∑ –∏–Ω–≤–æ–π—Å–∞

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `reference VARCHAR(50)` –≤ —Ç–∞–±–ª–∏—Ü—É `invoices`
   - –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `002_add_invoice_reference.sql`

2. **API –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—è `reference`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤)
   - –ü–æ–ª–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
```javascript
currentInvoiceData = {
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    reference: "97-12345678", // –Ω–æ–≤–æ–µ –ø–æ–ª–µ
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

### HTML –ø–æ–ª–µ:
```html
<div class="form-group">
    <label>–ü–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò</label>
    <input type="text" id="invoiceReference" placeholder="97-12345678" maxlength="20">
    <small style="color: #666; font-size: 12px;">–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä: 97-12345678</small>
</div>
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏–Ω–≤–æ–π—Å–µ:
```html
<p style="margin: 8px 0 1px 0; font-size: 10px;">
    Plaƒáanje sa pozivom na broj: ${invoice.reference || 'ATSNS' + invoice.number.replace(/-/g, '')}
</p>
```

### –°—Ö–µ–º–∞ –ë–î:
```sql
ALTER TABLE invoices ADD COLUMN IF NOT EXISTS reference VARCHAR(50);
COMMENT ON COLUMN invoices.reference IS '–ü–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò - payment reference number for Serbian invoices';
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞:**
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∏–Ω–≤–æ–π—Å–∞
   - –í –ø–æ–ª–µ "–ü–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò" –≤–≤–µ–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –Ω–æ–º–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: `97-12345678`)
   - –ò–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

2. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –í –≥–æ—Ç–æ–≤–æ–º –∏–Ω–≤–æ–π—Å–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò
   - –ü—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ –≤ PDF –ø–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

3. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞:**
   - –ü—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–Ω–≤–æ–π—Å–∞ –ø–æ–∑–∏–≤ –Ω–∞ –±—Ä–æ—ò —Ç–∞–∫–∂–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è
   - –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†—É—á–Ω–æ–π –≤–≤–æ–¥:
- `97-12345678`
- `01-987654321`
- `123-456-789`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:
–ï—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è: `ATSNS` + –Ω–æ–º–µ—Ä –∏–Ω–≤–æ–π—Å–∞ –±–µ–∑ –¥–µ—Ñ–∏—Å–æ–≤
- –ò–Ω–≤–æ–π—Å `1-19122024` ‚Üí `ATSNS119122024`

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migrate

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –≤ PostgreSQL:
ALTER TABLE invoices ADD COLUMN IF NOT EXISTS reference VARCHAR(50);
```

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–æ–ª–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Ä—É—à–µ–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ –ø—Ä–∏ –ø—É—Å—Ç–æ–º –ø–æ–ª–µ
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ 50 —Å–∏–º–≤–æ–ª–æ–≤ (–≤ –ë–î) / 20 —Å–∏–º–≤–æ–ª–æ–≤ (–≤ —Ñ–æ—Ä–º–µ)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ frontend –∏ backend —É—Ä–æ–≤–Ω—è—Ö

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
